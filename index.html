<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <title>COI</title>
    <script src="./coi-serviceworker.js"></script>
</head>

<body>
    <h1>coi-serviceworker</h1>

    <script type="module">
        const worker = new SharedWorker(new URL('./worker.js', import.meta.url));
        // 2. Start the port (required if using addEventListener)
        worker.port.start();
        // 3. Send a message to the worker
        worker.port.postMessage("Hello from a tab!");
        // 4. Listen for messages from the worker
        worker.port.onmessage = function(e) {
          console.log('Received from worker:', e.data);
        };
        worker.port.onerror = err => console.error('worker', err);
    </script>
    
    <script>
        const el = document.createElement("div")
        el.innerHTML = `Cross origin isolated: ${window.crossOriginIsolated ? "✅" : "❌"}`
        document.body.append(el);
    </script>
</body>

</html>
